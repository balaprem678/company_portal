<!-- <app-common-table [settings]="settings" [source]="source" [count]="count" [itemsPerPage]="default_limit" [tablename]="'Report Templete List'" [add_btn]="add_btn" [addBtnUrl]="addBtnUrl" [addBtnName]="addBtnName" [editUrl]="editUrl" [deleteApis]="deleteApis"
    (onDeleteChange)="onDeleteChange($event)" [bulk_action]="bulk_action" (onitemsPerPageChange)="onitemsPerPageChange($event)" [card_details]="card_details" (onPageChange)="onPageChange($event)" (onheaderCardChange)="onheaderCardChange($event)" (onSearchChange)="onSearchChange($event)"
    [user_list_filter_action]="user_list_filter_action" [inactiveApis]="inactiveApis" (onInactivechange)="onInactivechange($event)">
</app-common-table> -->
<div class="container mt-4 report-container">
  <!-- Tabs -->
  <ul class="nav nav-tabs custom-tabs">
    <li class="nav-item">
      <button
        class="nav-link"
        [class.active]="activeTab === 'attendance'"
        (click)="setTab('attendance')"
      >
        Attendance
      </button>
    </li>
    <li class="nav-item">
      <button
        class="nav-link"
        [class.active]="activeTab === 'customers'"
        (click)="setTab('customers')"
      >
        Payments from Customers
      </button>
    </li>
    <li class="nav-item">
      <button
        class="nav-link"
        [class.active]="activeTab === 'vendors'"
        (click)="setTab('vendors')"
      >
        Payments to Vendors
      </button>
    </li>
  </ul>

  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center my-3">
    <h5 class="mb-0">
      {{
        activeTab === "attendance"
          ? "Attendance Report"
          : activeTab === "customers"
          ? "Payments from Customers"
          : "Payments to Vendors"
      }}
    </h5>

    <div class="d-flex gap-2 align-items-center">
      <!-- Filter & Sort Controls -->
      <input
        type="text"
        class="form-control form-control-sm"
        [placeholder]="'üîç ' + filterOptions.placeholder"
        [(ngModel)]="searchText"
      />
      <select class="form-select form-select-sm" [(ngModel)]="filterStatus">
        <option value="">All Status</option>
        <option *ngIf="activeTab === 'attendance'" value="Present">
          Present
        </option>
        <option *ngIf="activeTab === 'attendance'" value="Absent">
          Absent
        </option>
        <option *ngIf="activeTab === 'attendance'" value="Leave">Leave</option>
        <option *ngIf="activeTab !== 'attendance'" value="Paid">Paid</option>
        <option *ngIf="activeTab !== 'attendance'" value="Unpaid">
          Unpaid
        </option>
        <option *ngIf="activeTab !== 'attendance'" value="Partial">
          Partial
        </option>
      </select>
      <input
        type="date"
        class="form-control form-control-sm"
        [(ngModel)]="startDate"
      />
      <input
        type="date"
        class="form-control form-control-sm"
        [(ngModel)]="endDate"
      />
      <select class="form-select form-select-sm" [(ngModel)]="sortBy">
        <option value="">Sort ‚¨ç</option>
        <option *ngFor="let opt of sortOptions" [value]="opt.value">
          {{ opt.label }}
        </option>
      </select>

      <!-- Download PDF -->
      <button class="btn btn-sm btn-primary" (click)="downloadPDF()">
        <i class="bi bi-file-earmark-arrow-down"></i> PDF
      </button>
    </div>
  </div>

  <!-- Table Wrapper for PDF Export -->
  <div #tableContent>
    <!-- Attendance -->
    <div *ngIf="activeTab === 'attendance'">
      <table class="table table-bordered table-striped custom-table">
        <thead>
          <tr>
            <th>Employee Name</th>
            <th>Date</th>
            <th>ID No.</th>
            <th>Status</th>
            <th>Last Month Record</th>
            <th>Remarks</th>
            <th>Total Days / Actual Days</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let row of filteredAttendance">
            <td>{{ row.employeeName }}</td>
            <td>{{ row.date }}</td>
            <td>{{ row.idNo }}</td>
            <td>{{ row.status }}</td>
            <td>{{ row.lastMonthRecord }}</td>
            <td>{{ row.remarks }}</td>
            <td>{{ row.totalDays }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Customers -->
    <div *ngIf="activeTab === 'customers'">
      <table class="table table-bordered table-striped custom-table">
        <thead>
          <tr>
            <th>Client Name</th>
            <th>Contract ID</th>
            <th>Invoice No.</th>
            <th>Payment Due Date</th>
            <th>Amount Paid</th>
            <th>Status</th>
            <th>Balance</th>
            <th>Remarks</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let row of filteredCustomers">
            <td>{{ row.name }}</td>
            <td>{{ row.contractId }}</td>
            <td>{{ row.invoiceNo }}</td>
            <td>{{ row.dueDate }}</td>
            <td>{{ row.amountPaid | currency }}</td>
            <td>{{ row.status }}</td>
            <td>{{ row.balance | currency }}</td>
            <td>{{ row.remarks }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Vendors -->
    <div *ngIf="activeTab === 'vendors'">
      <table class="table table-bordered table-striped custom-table">
        <thead>
          <tr>
            <th>Vendor Name</th>
            <th>Contract ID</th>
            <th>Invoice No.</th>
            <th>Payment Due Date</th>
            <th>Amount Paid</th>
            <th>Status</th>
            <th>Balance</th>
            <th>Remarks</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let row of filteredVendors">
            <td>{{ row.name }}</td>
            <td>{{ row.contractId }}</td>
            <td>{{ row.invoiceNo }}</td>
            <td>{{ row.dueDate }}</td>
            <td>{{ row.amountPaid | currency }}</td>
            <td>{{ row.status }}</td>
            <td>{{ row.balance | currency }}</td>
            <td>{{ row.remarks }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
